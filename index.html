<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christania Stock Exchange</title>
    <link rel="stylesheet" href="Styles/Main.css">
    <link rel="stylesheet" href="Styles/Index.css">
</head>

<body>

    <!-- â€”â€”â€” TICKER TAPE â€”â€”â€” -->
    <div class="ticker-tape">
        <div class="ticker-inner" id="ticker">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- â€”â€”â€” NAV â€”â€”â€” -->
    <nav>
        <a href="index.html" class="nav-logo">
            <span class="nav-logo-main"><span>C</span>SE</span>
            <span class="nav-logo-sub">christania stock exchange</span>
        </a>
        <ul class="nav-links">
            <li><a href="index.html" class="active">Index</a></li>
            <li><a href="explore.html">Explore</a></li>
            <li><a href="history.html">History</a></li>
        </ul>
        <div class="nav-ticker" id="nav-ticker">
            <span class="live-dot"></span>
            <span class="mono" id="nav-index">CSEC <span class="up">1847.32</span></span>
        </div>
    </nav>

    <div class="page">

        <!-- â€”â€”â€” HERO â€”â€”â€” -->
        <section class="hero">
            <div class="hero-bg"></div>
            <div class="hero-bg-grid"></div>

            <div class="hero-eyebrow">// personal market intelligence</div>
            <h1 class="hero-title">
                Christania<br>
                <span class="wild">Stock Exchange</span>
            </h1>
            <p class="hero-sub">A private portfolio exchange â€” tracking every rupee, every share, every chapter of the
                market journey. Built with obsession.</p>
            <div class="hero-cta">
                <a href="explore.html" class="btn-pink">Explore Portfolio â†’</a>
                <a href="history.html" class="btn-ghost">View History</a>
            </div>

            <!-- Index Card -->
            <div class="index-hero-card">
                <div class="ihc-label"><span class="live-dot"></span> CSE Composite Index</div>
                <div class="ihc-value" id="ihc-val">1,847.32</div>
                <div class="ihc-change">
                    <span class="pill up" id="ihc-pill">â–² +12.45 (+0.68%)</span>
                    <span style="font-size:0.7rem;color:var(--text-dimmer)">today</span>
                </div>
                <div class="ihc-divider"></div>
                <canvas id="heroMiniChart" height="60"></canvas>
                <div class="ihc-divider"></div>
                <div class="ihc-stats">
                    <div>
                        <div class="ihc-stat-label">Total Invested</div>
                        <div class="ihc-stat-val">â‚¹4.85L</div>
                    </div>
                    <div>
                        <div class="ihc-stat-label">Current Value</div>
                        <div class="ihc-stat-val">â‚¹6.12L</div>
                    </div>
                    <div>
                        <div class="ihc-stat-label">Total Return</div>
                        <div class="ihc-stat-val" style="color:var(--green)">+26.27%</div>
                    </div>
                    <div>
                        <div class="ihc-stat-label">Holdings</div>
                        <div class="ihc-stat-val">8</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- â€”â€”â€” STATS ROW â€”â€”â€” -->
        <div class="stats-row animate-up-1">
            <div class="stat-block" data-index="01">
                <div class="stat-label">Portfolio Value</div>
                <div class="stat-value">â‚¹6.12L</div>
                <div class="stat-sub" style="color:var(--green)">â†‘ +26.27% all time</div>
            </div>
            <div class="stat-block" data-index="02">
                <div class="stat-label">Total Invested</div>
                <div class="stat-value">â‚¹4.85L</div>
                <div class="stat-sub">Across 31 transactions</div>
            </div>
            <div class="stat-block" data-index="03">
                <div class="stat-label">Dividends Earned</div>
                <div class="stat-value">â‚¹21,070</div>
                <div class="stat-sub">Lifetime passive income</div>
            </div>
            <div class="stat-block" data-index="04">
                <div class="stat-label">Total Shares</div>
                <div class="stat-value">565</div>
                <div class="stat-sub">Across 8 companies</div>
            </div>
        </div>

        <!-- â€”â€”â€” HOLDINGS PREVIEW â€”â€”â€” -->
        <section class="section animate-up-2">
            <div class="section-header">
                <div>
                    <div class="section-eyebrow">// portfolio snapshot</div>
                    <h2 class="section-title">Holdings</h2>
                </div>
                <a href="explore.html" class="btn-ghost">Full View â†’</a>
            </div>
            <div class="accent-line"></div>
            <table class="holdings-table" id="holdingsTable">
                <thead>
                    <tr>
                        <th>Stock</th>
                        <th>Sector</th>
                        <th>Shares</th>
                        <th>Avg Price</th>
                        <th>Current</th>
                        <th>Return</th>
                        <th>Weight</th>
                        <th>Today</th>
                    </tr>
                </thead>
                <tbody id="holdingsBody">
                </tbody>
            </table>
        </section>

        <!-- â€”â€”â€” SECTOR BREAKDOWN â€”â€”â€” -->
        <section class="section animate-up-3" style="padding-top:0">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:2rem;align-items:start">
                <div>
                    <div class="section-eyebrow">// allocation</div>
                    <h2 class="section-title" style="font-size:1.8rem">Sector Breakdown</h2>
                    <div class="accent-line" style="margin-top:1rem"></div>
                    <div class="sector-list" id="sectorList"></div>
                </div>
                <div>
                    <div class="section-eyebrow">// relative weights</div>
                    <h2 class="section-title" style="font-size:1.8rem">Concentration</h2>
                    <div class="accent-line" style="margin-top:1rem"></div>
                    <div
                        style="position: relative; height: 260px; display: flex; align-items: center; justify-content: center;">
                        <canvas id="sectorChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- â€”â€”â€” OVER THE YEARS BOX â€”â€”â€” -->
        <a href="history.html" class="years-box animate-up-4">
            <div class="yb-left">
                <div class="yb-eyebrow">// the chronicles</div>
                <div class="yb-title">Over the<br>Years</div>
                <div class="yb-desc">Quarterly dividends, market events, share accumulation â€” every year documented in
                    full.</div>
            </div>
            <div class="yb-right">
                <div class="yb-years">
                    <div class="yb-year-chip">2024</div>
                    <div class="yb-year-chip">2025</div>
                    <div class="yb-year-chip" style="opacity:0.4">2026</div>
                </div>
                <div class="yb-arrow">â†’</div>
            </div>
        </a>

    </div>

    <!-- â€”â€”â€” FOOTER â€”â€”â€” -->
    <footer>
        <div class="f-left">Christania Stock Exchange â€” a personal archive.</div>
        <div class="f-right">Made with ðŸ’– by Joel Jolly Â· <span id="fdate"></span></div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <script>
        // â€”â€”â€” DATA â€”â€”â€”
        const portfolio = {
            holdings: [
                { ticker: "RELIANCE", name: "Reliance Industries", sector: "Energy", shares: 42, avgPrice: 2840.50, currentPrice: 3120.75, weightage: 21.2, dayChange: 0.85 },
                { ticker: "TCS", name: "Tata Consultancy Services", sector: "IT Services", shares: 28, avgPrice: 3680.00, currentPrice: 4210.30, weightage: 18.9, dayChange: 1.24 },
                { ticker: "INFY", name: "Infosys Ltd", sector: "IT Services", shares: 55, avgPrice: 1420.00, currentPrice: 1780.50, weightage: 15.7, dayChange: -0.32 },
                { ticker: "HDFCBANK", name: "HDFC Bank Ltd", sector: "Banking", shares: 38, avgPrice: 1560.00, currentPrice: 1720.80, weightage: 13.2, dayChange: 0.54 },
                { ticker: "BAJFINANCE", name: "Bajaj Finance Ltd", sector: "Finance", shares: 12, avgPrice: 6800.00, currentPrice: 7450.20, weightage: 14.3, dayChange: 1.05 },
                { ticker: "WIPRO", name: "Wipro Ltd", sector: "IT Services", shares: 90, avgPrice: 520.00, currentPrice: 635.40, weightage: 9.2, dayChange: -0.78 },
                { ticker: "TATASTEEL", name: "Tata Steel Ltd", sector: "Metals", shares: 180, avgPrice: 145.00, currentPrice: 162.80, weightage: 4.7, dayChange: -1.22 },
                { ticker: "ZOMATO", name: "Zomato Ltd", sector: "Consumer Tech", shares: 320, avgPrice: 110.00, currentPrice: 198.40, weightage: 2.8, dayChange: 2.14 }
            ],
            sectors: [
                { name: "IT Services", weightage: 43.8, color: "#FF2E63" },
                { name: "Banking & Finance", weightage: 27.5, color: "#00e5a0" },
                { name: "Energy", weightage: 21.2, color: "#ffd700" },
                { name: "Metals", weightage: 4.7, color: "#a78bfa" },
                { name: "Consumer Tech", weightage: 2.8, color: "#60a5fa" }
            ]
        };

        // â€”â€”â€” TICKER TAPE â€”â€”â€”
        const tickerData = portfolio.holdings.map(h => {
            const sign = h.dayChange >= 0 ? 'â–²' : 'â–¼';
            const col = h.dayChange >= 0 ? '#00e5a0' : '#FF2E63';
            return `<span class="ticker-item">${h.ticker} <span style="color:${col}">${sign} ${Math.abs(h.dayChange).toFixed(2)}%</span> <span class="sep">|</span> â‚¹${h.currentPrice.toLocaleString()}</span>`;
        }).join('');
        const inner = document.getElementById('ticker');
        inner.innerHTML = tickerData + tickerData; // duplicate for seamless loop

        // â€”â€”â€” HOLDINGS TABLE â€”â€”â€”
        const tbody = document.getElementById('holdingsBody');
        portfolio.holdings.forEach(h => {
            const ret = ((h.currentPrice - h.avgPrice) / h.avgPrice * 100).toFixed(2);
            const retPos = parseFloat(ret) >= 0;
            const dayPos = h.dayChange >= 0;
            tbody.innerHTML += `
    <tr>
      <td>
        <div class="h-ticker">${h.ticker}</div>
        <div class="h-name">${h.name}</div>
      </td>
      <td><span class="h-sector">${h.sector}</span></td>
      <td><span class="mono">${h.shares}</span></td>
      <td class="mono">â‚¹${h.avgPrice.toLocaleString()}</td>
      <td class="mono">â‚¹${h.currentPrice.toLocaleString()}</td>
      <td class="mono" style="color:${retPos ? 'var(--green)' : 'var(--pink)'}">
        ${retPos ? '+' : ''}${ret}%
      </td>
      <td>
        <span class="mono">${h.weightage}%</span>
        <div class="weight-bar-wrap"><div class="weight-bar" style="width:${h.weightage}%"></div></div>
      </td>
      <td>
        <span class="pill ${dayPos ? 'up' : 'dn'}">${dayPos ? 'â–²' : 'â–¼'} ${Math.abs(h.dayChange)}%</span>
      </td>
    </tr>
  `;
        });

        // â€”â€”â€” SECTOR LIST â€”â€”â€”
        const sectorList = document.getElementById('sectorList');
        portfolio.sectors.forEach(s => {
            sectorList.innerHTML += `
    <div class="sector-item">
      <div class="sector-dot" style="background:${s.color}"></div>
      <div class="sector-name">${s.name}</div>
      <div class="sector-bar-track">
        <div class="sector-bar-fill" style="width:${s.weightage}%;background:${s.color}"></div>
      </div>
      <div class="sector-pct">${s.weightage}%</div>
    </div>
  `;
        });

        // â€”â€”â€” MINI HERO CHART â€”â€”â€”
        const heroCtx = document.getElementById('heroMiniChart').getContext('2d');
        function genWalk(n, start, vol) {
            const arr = [start];
            for (let i = 1; i < n; i++) arr.push(+(arr[i - 1] + (Math.random() - 0.48) * vol).toFixed(2));
            return arr;
        }
        const miniData = genWalk(60, 1780, 8);
        miniData[miniData.length - 1] = 1847.32;
        new Chart(heroCtx, {
            type: 'line',
            data: {
                labels: miniData.map((_, i) => i),
                datasets: [{
                    data: miniData,
                    borderColor: '#FF2E63',
                    borderWidth: 1.5,
                    fill: true,
                    backgroundColor: (ctx) => {
                        const g = ctx.chart.ctx.createLinearGradient(0, 0, 0, 60);
                        g.addColorStop(0, 'rgba(255,46,99,0.15)');
                        g.addColorStop(1, 'rgba(255,46,99,0)');
                        return g;
                    },
                    tension: 0.4,
                    pointRadius: 0
                }]
            },
            options: { responsive: true, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
        });

        // â€”â€”â€” SECTOR DOUGHNUT â€”â€”â€”
        const sCtx = document.getElementById('sectorChart').getContext('2d');
        new Chart(sCtx, {
            type: 'doughnut',
            data: {
                labels: portfolio.sectors.map(s => s.name),
                datasets: [{
                    data: portfolio.sectors.map(s => s.weightage),
                    backgroundColor: portfolio.sectors.map(s => s.color),
                    borderColor: '#080810',
                    borderWidth: 3,
                    hoverBorderWidth: 0
                }]
            },
            options: {
                responsive: true,
                cutout: '65%',
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom',
                        labels: {
                            color: 'rgba(240,240,248,0.5)',
                            font: { family: 'JetBrains Mono', size: 10 },
                            boxWidth: 10,
                            padding: 12
                        }
                    }
                }
            }
        });

        // â€”â€”â€” FOOTER DATE â€”â€”â€”
        document.getElementById('fdate').textContent = new Date().toLocaleDateString('en-IN', { year: 'numeric', month: 'long' });
    </script>
</body>

</html>